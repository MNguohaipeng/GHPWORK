<!DOCTYPE html>
<html lang="zh-cn" class="app">
<head>

    <meta charset="utf-8" />
    <title>GHPWORK | Web Application</title>
    <meta name="description" content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    @Styles.Render("~/Template/css")

    <!--[if lt IE 9]>
      <script src="js/ie/html5shiv.js"></script>
      <script src="js/ie/respond.min.js"></script>
      <script src="js/ie/excanvas.js"></script>
    <![endif]-->

</head>
<body ng-app="GHPAPP" ng-controller="GHPCtrl">
    <section class="vbox">
        <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">
            <div class="navbar-header aside bg-info nav-xs">
                <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">
                    <i class="icon-list"></i>
                </a>
                <a href="index.html" class="navbar-brand text-lt">
                    <i class="icon-earphones"></i>
                    <img src="~/Template/images/logo.png" alt="." class="hide">
                    <span class="hidden-nav-xs m-l-sm">GHPWORK</span>
                </a>
                <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">
                    <i class="icon-settings"></i>
                </a>
            </div>      <ul class="nav navbar-nav hidden-xs">
                <li>
                    <a href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted">
                        <i class="fa fa-indent text"></i>
                        <i class="fa fa-dedent text-active"></i>
                    </a>
                </li>
            </ul>
            <form class="navbar-form navbar-left input-s-lg m-t m-l-n-xs hidden-xs" role="search">
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-btn">
                            <button type="submit" class="btn btn-sm bg-white btn-icon rounded"><i class="fa fa-search"></i></button>
                        </span>
                        <input type="text" class="form-control input-sm no-border rounded" placeholder="Search">
                    </div>
                </div>
            </form>
            <div class="navbar-right ">
                <ul class="nav navbar-nav m-n hidden-xs nav-user user">
                    <li class="hidden-xs">
                        <a href="#" class="dropdown-toggle lt" data-toggle="dropdown">
                            <i class="icon-bell"></i>
                            <span class="badge badge-sm up bg-danger count" style="display: inline-block;">3</span>
                        </a>
                        <section class="dropdown-menu aside-xl animated fadeInUp">
                            <section class="panel bg-white">
                                <div class="panel-heading b-light bg-light">
                                    <strong>You have <span class="count" style="display: inline;">3</span> notifications</strong>
                                </div>

                                <div class="list-group list-group-alt">
                                    <a href="#" class="media list-group-item" style="display: block;"><span class="pull-left thumb-sm text-center"><i class="fa fa-envelope-o fa-2x text-success"></i></span><span class="media-body block m-b-none">Sophi sent you a email<br><small class="text-muted">1 minutes ago</small></span></a>
                                    <a href="#" class="media list-group-item">
                                        <span class="pull-left thumb-sm">
                                            <img src="~/Template/images/a0.png" alt="..." class="img-circle">
                                        </span>
                                        <span class="media-body block m-b-none">
                                            Use awesome animate.css<br>
                                            <small class="text-muted">10 minutes ago</small>
                                        </span>
                                    </a>
                                    <a href="#" class="media list-group-item">
                                        <span class="media-body block m-b-none">
                                            1.0 initial released<br>
                                            <small class="text-muted">1 hour ago</small>
                                        </span>
                                    </a>
                                </div>
                                <div class="panel-footer text-sm">
                                    <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>
                                    <a href="#notes" data-toggle="class:show animated fadeInRight">See all the notifications</a>
                                </div>
                            </section>
                        </section>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown">
                            <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
                                <img src="~/Template/images/a0.png" alt="...">
                            </span>
                            John.Smith <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu animated fadeInRight">
                            <li>
                                <span class="arrow top"></span>
                                <a href="#">Settings</a>
                            </li>
                            <li>
                                <a href="profile.html">Profile</a>
                            </li>
                            <li>
                                <a href="#">
                                    <span class="badge bg-danger pull-right">3</span>
                                    Notifications
                                </a>
                            </li>
                            <li>
                                <a href="docs.html">Help</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="modal.lockme.html" data-toggle="ajaxModal">Logout</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </header>

        <section>
            <section class="hbox stretch">
                <!-- .aside -->
                <aside class="bg-black dk nav-xs aside hidden-print" id="nav">
                    <section class="vbox">
                        <section class="w-f-md scrollable">
                            <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="10px" data-railOpacity="0.2">



                                <!-- nav -->
                                <nav class="nav-primary hidden-xs">
                                
                                    <ul class="nav" data-ride="collapse">
                             
                                        <li  ng-repeat="x in GetMenuList"   ng-if="x.Level==1">
                        
                                            <a href="javascript:;" ng-click="Jump(x.Url)" class="auto"  data-ajax-update="#RenderBody" data-ajax="true">
                                                <span class="pull-right text-muted">
                                                    <i class="fa fa-angle-left text"></i>
                                                    <i class="fa fa-angle-down text-active"></i>
                                                </span>
                                                <i class="icon-screen-desktop icon">
                                                </i>
                                                <span>{{x.MenuName}}</span>
                                            </a>
                                            <ul class="nav dk text-sm">
                           
                                                <li  ng-repeat="y in GetMenuList" ng-if="y.ParentID==x.Id">
                                                    <a href="javascript:;" ng-click="Jump(y.Url)" class="auto">
                                                        <i class="fa fa-angle-right text-xs"></i>
                                                        <span>{{y.MenuName}}</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                   
                                </nav>
                                <!-- / nav -->
                            </div>
                        </section>

                        <footer class="footer hidden-xs no-padder text-center-nav-xs">
                            <div class="bg hidden-xs ">
                                <div class="dropdown dropup wrapper-sm clearfix">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                      
                                        <span class="hidden-nav-xs clear">
                                            <span class="block m-l">
                                                <strong class="font-bold text-lt">©GHPWORD</strong>
                                           
                                            </span>
                                            <span class="text-muted text-xs block m-l">郭海鹏</span>
                                        </span>
                                    </a>
                                    
                                </div>
                            </div>
                        </footer>
                    </section>
                </aside>
                <!-- /.aside -->
                <section id="content">
                    <section class="hbox stretch">
                        <section id="RenderBody">
                            @RenderBody()
                            <iframe id="txtContentBody" style="width:calc(100%); height: calc(100%); border: 0; margin: 0; padding: 0; min-height: 400px;overflow-y:scroll" src="@Url.Action("Index","Home",new { moudleId = 0, menuId = 0 , btnId = 0})"></iframe>

                        </section>
        
                    </section>
                    <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open" data-target="#nav,html"></a>
                </section>
            </section>
        </section>
    </section>

    @Scripts.Render("~/bundles/base")
    @RenderSection("scripts", required: false)
</body>
</html>
<script src="~/Scripts/angular.js"></script>
<script>
 
    //window.onload = function () {
    //    setInterval(function () { alert(loading) }, 1000);
    //}

    var app = angular.module("GHPAPP", []);
    app.controller("GHPCtrl", function ($scope, $http) {
        $scope.GetMenu = function () {
            $http({
                method: 'POST',
                url: '/Home/GetMenu'
            }).then(function successCallback(response) {

                if (response.data.start==0) {
                    $scope.GetMenuList = response.data.data;
                } else {

                }

            }, function errorCallback(response) {
                // 请求失败执行代码
            });

        }

        $scope.Jump = function (Url) {
            if (Url != "#") {
             
                $("#txtContentBody").attr("src", Url);
            }
        

        }

        $scope.GetMenu();

    })
</script>
